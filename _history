{"entries":[{"timestamp":1768506959898,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":237,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":33,"diffs":[[1,"\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":30,"length1":62,"diffs":[[1,"    \"description\": \"\",\n"]]},{"start1":208,"length1":40,"diffs":[[1,"        \"README.md\"\n"]]},{"start1":235,"length1":75,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]},{"type":"added","filename":"test.ts","value":"// testene settes inn her; disse vil ikke kompilert så lenge denne pakken blir brukt som en utvidelse.\n"},{"type":"added","filename":"sgp30.ts","value":"namespace SGP30 {\n\n    const SGP30_ADDR = 0x58\n    let baselineTVOC = 0\n    let baselineCO2 = 0\n\n    // ==================================================\n    // INITIALISERING\n    // ==================================================\n    //% block=\"initialiser SGP30\"\n    //% group=\"Oppsett\"\n    export function init(): void {\n        // Init command 0x2003\n        i2cWriteWord(SGP30_ADDR, 0x2003)\n        basic.pause(10)\n        // Start kontinuerlig måling\n        i2cWriteWord(SGP30_ADDR, 0x2008)\n        basic.pause(10)\n    }\n\n    // ==================================================\n    // TVOC OG eCO2\n    // ==================================================\n    //% block=\"TVOC (ppb)\"\n    //% group=\"Luftkvalitet\"\n    export function TVOC(): number {\n        let data = readMeasurement()\n        return data[2] << 8 | data[3]\n    }\n\n    //% block=\"eCO₂ (ppm)\"\n    //% group=\"Luftkvalitet\"\n    export function eCO2(): number {\n        let data = readMeasurement()\n        return data[0] << 8 | data[1]\n    }\n\n    // ==================================================\n    // RÅDATA\n    // ==================================================\n    //% block=\"rådata H₂\"\n    //% group=\"Luftkvalitet\"\n    export function rawH2(): number {\n        let data = readMeasurement()\n        return data[0] << 8 | data[1]\n    }\n\n    //% block=\"rådata etanol\"\n    //% group=\"Luftkvalitet\"\n    export function rawEthanol(): number {\n        let data = readMeasurement()\n        return data[2] << 8 | data[3]\n    }\n\n    // ==================================================\n    // KALIBRERING / BASELINE\n    // ==================================================\n    //% block=\"sett baseline\"\n    //% group=\"Luftkvalitet\"\n    export function setBaseline(tvoc: number, co2: number): void {\n        baselineTVOC = tvoc\n        baselineCO2 = co2\n        i2cWriteWord(SGP30_ADDR, 0x201E) // baseline command\n        basic.pause(10)\n    }\n\n    // ==================================================\n    // I2C HJELPEFUNKSJONER\n    // ==================================================\n    function i2cWriteWord(addr: number, cmd: number): void {\n        let buf = pins.createBuffer(2)\n        buf[0] = (cmd >> 8) & 0xFF\n        buf[1] = cmd & 0xFF\n        pins.i2cWriteBuffer(addr, buf)\n    }\n\n    function i2cRead4(addr: number): number[] {\n        let buf = pins.i2cReadBuffer(addr, 4)\n        let arr: number[] = []\n        for (let i = 0; i < 4; i++) arr.push(buf[i])\n        return arr\n    }\n\n    function readMeasurement(): number[] {\n        i2cWriteWord(SGP30_ADDR, 0x2008) // måle kommando\n        basic.pause(12)\n        return i2cRead4(SGP30_ADDR)\n    }\n}\n"}]}],"snapshots":[{"timestamp":1768506959897,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"SGP30 sensor\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}}],"shares":[],"lastSaveTime":1768507047553}